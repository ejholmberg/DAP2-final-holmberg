# README

## DAP 2 Fall 2024 - Final Project

### Repository Contents
*  _R files_: `data.R`, `staticplot.R`, `shinyapp.R`, `model.R`, and `textprocess.R`
*  _Folders_: `data`, `images`, `presentation`, `Supporting_documents_research`
    * `data` contains the unmodified data manipulated in `data.R`, text data from Congress.gov (`MSP_congress.csv`), as well as the processed dataset `data_full.Rdata` (with data from CMS, MassGIS, and the US Census Bureau).
    * `images` contains plot and map outputs from `staticplot.R` as well as a wordcloud output from `textprocess.R`.
    * `presentation` contains the Quarto slide materials from my in-class presentation.
    * `Supporting_documents_research` includes three publications I leaned on for context and potential research methods, from AARP, MassHealth (the Massachusetts Medicaid program), and [Gina Li](https://sites.google.com/view/ginali).
*  _Writeup_: writeup.md

### Project Overview
Medicare Savings Programs (MSP) lower health care costs paid by low-income seniors. By enrolling in a Medicare Savings Program, eligible seniors immediately have their Medicare Part B premiums paid for them (~ $2,000 per year) and receive the Social Security Administration's Part D Extra Help benefit for prescription costs (~ $5,300 value per year).

States can set their own MSP eligibility criteria beyond federal baselines. In Massachusetts, the income eligibility threshold and asset limit for MSP were significantly raised in 2020 and again in 2023. 

My project seeks to show where in Massachusetts expanded eligibility led to greater enrollment in MSP. This information would be valuable to policymakers, advocates, and seniors themselves who are organizing to improve health care assistance. This project creates plots, maps, and Shiny app tools to illuminate descriptive relationships between demographics, enrollment, and policy change. Data sources for these outputs are Center for Medicare and Medicaid Services (CMS) enrollment data, US Census demographic data, and Massachusetts county-level shapefiles.

I am also interested in learning more about how researchers, policymakers, and others view MSP as an intervention to improve health outcomes vs. economic conditions for seniors. That question is the basis of this project's text analysis, which uses bill summaries from Congress.gov to identify common terminology used at the federal level to describe policymaking around Medicare Savings Programs.

### Reproduction Instructions
* The __`data.R`__ file combines the primary data sources into a usable format for generating the plots, maps, and Shiny tools. The combined dataset generated by data.R can be found in the data folder, named `data_full.RData`. To generate this dataset using data.R, follow these steps:
    * In line 57, edit `file_path` to local directory containing CMS data (which can be downloaded from the `data` folder or https://www.cms.gov/data-research/research/statistical-resources-dually-eligible-beneficiaries/mmco-statistical-analytic-reports)
    * For non-geographic analysis, export combined dataframe without shapefiles in line 80 for a smaller file size.
    * In line 84, edit `zippath` to local directory containing MassGIS shapefiles (which can be downloaded from the `data` folder or https://www.mass.gov/info-details/massgis-data-counties)
    * If using _tidycensus_ package to access US Census API, proceed with lines 102-168.
       * In line 102, insert your own Census API key if using tidycensus package for the first time.
       * If not using API, access archived Census data in `data` folder by editing `directory` in line 191 and running lines 191-193 before proceeding to lines 178-188.
    * Line 188 produces the processed dataset, `data_full.RData` which can also be downloaded from [Google Drive here](https://drive.google.com/file/d/1C4G0NUO2CfAASyI3VD6w92veP3LbY5EO/view?usp=drive_link).
 * Once `data_full.Rdata` is on your machine, proceed to __`staticplot.R`__ or __`shinyapp.R`__ to create figures and tools.
    * `staticplot.R` generates `plot1_enrollment_time.png` and `plot2_enrollment_map.png` which can be found in the `images` folder.
         * In line 5, edit `directory` to local directory containing `data_full.Rdata`.
    * `shinyapp.R` generates two Shiny apps: one for enrollment data plotted over time, and one for demographic data mapped alongside enrollment change after the January 2020 eligibility expansion, also mapped.
         * For App 1: In line 7, edit `directory` to local directory containing `data_full.Rdata`.
         * For App 2: In line 94, edit `directory` to local directory containing `data_full.Rdata`.
* __`model.R`__ fits a simple linear model to MSP enrollment data, using a few demographic measures.
   * In line 3, edit `directory` to local directory containing `data_full.Rdata`.
   * The independent variables used:
      *  _ps1_: whether or not the expanded eligibility policy was in place (pre-/post-Jan. 2020)
      *  _pop_: total county population, scaled to 100,000s
      *  _nw_: nonwhite percentage of county population
*  __`textprocess.R`__ generates a wordcloud of the most frequent terms used in bill summaries from U.S. House bills pertaining to MSP.
   * In line 6, edit `directory` to local directory containing `MSP_congress.csv`.
